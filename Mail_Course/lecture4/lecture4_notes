Типы доменов:
PF_UNIX - что то типо пайпа, локально
PF_INET - 4 версия протокола - главный тип.
PF_INET6 - 6 версия протокола.
,
Виды сокетов:
SOCK_STREAM - поток байт (TCP)
SOCK_DGRAM - датаграмма (UDP, Unix socket)
SOCK_RAW - "сырые" сокеты

Зачем передавать дескриптор из одного процесса в другой?
Один сервер падает, мы форкаемся и передаем сокет в другой процесс и продолжаем слушать 

bind() - прнимает сокет, аддресс на котором слушаем и длинна аддресса. Sockadr - не та структура, которую мы передаем, а sock_len для того, чтобы мы могли понять, что за структура передана реально. 
Нужно проверять, что bind вернул хороший код ответа, иначе аддресс занят.

Смена порядка байт.
Хостовый порядок байт и сетевой порядок байт.
Биты передаются в норм порядке, байты могут перемешиваться.

Структура sockaddr
принимает sa_family (PF_INET, PF_UNIX)....

Структура sockaddr_in6
на презентации.

listen() - сокет начинает принимать соединения.
Принимает сокет и backlog - число соединений, которые будут висеть в очереди на сокет. Соединение закрывается, когда на сокете вызван accept()
backlog - нужно подобрать оптимальное значение между слишком большим и слишком маленьким значениями.

accept() - принимаем клиента. Возвращает дескриптор клиента - пишем в него информацию. 
принимает адресс - айпишник того, что к нам пришел (не наш айпишник!!!), sockaddr и address_len

connect() - клиентский системный вызов. Возможен для tcp - обязательно, для udp - опционально.
Клиент пишет прямо в сокет, который создал

Запись в сокет:
send() - то же что write, но с дополнительными флагами.
По дефолту запись/чтение в сокет - блокирующие. Если поставим сокет неблокирующий, то на чтении будем блок, а на записи не всегда. На записи блокируеся тогда, когда у нас нулевое окно.
В tcp нужно обязательно делать в цикле, так как окно может быть меньше, чем данные - то есть за раз не все данные не могут быть отправлены. Send возвращает сколько было отправлено.

Через sendmsg можно передавать открытый фаловый дескриптор

Вычитывание из сокета
recv - принимает сокет, буфер, флаги. Вычитывает байты, но не больше, чем размер буфера. -1 - ошибка, 0 - пришел FIN пакет, с другой стороны закрыто на запись, у вас на чтение, но писать вы в него можете! Тяжело работать с датаграммами, так как датаграммы приходят только целиком.
recvfrom - Гарантировано вычитывает новую датаграмму.
recvmsg
Буффер  - не больше MTU

ЧЕРЕЗ unix сокет можно передавать сокетный дескритпор!

Передавать надо не айпишник, а спец структуру. ip_atoi преобразует строку аддреса к нужному типу.
